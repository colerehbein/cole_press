{
  "name": "cole_press",
  "image": "mcr.microsoft.com/devcontainers/base:ubuntu-24.04",

  "features": {
    "ghcr.io/rocker-org/devcontainer-features/r-rig:1": {
      "version": "4.5.1",
      "installDevTools": false,
      "installRMarkdown": false,
      "installRenv": false
    },
    "ghcr.io/rocker-org/devcontainer-features/quarto-cli:1": {
      "version": "1.7.31",
      "installTinyTex": true
    },
    "ghcr.io/devcontainers/features/node:1": {
      "version": "lts"
    },
    "ghcr.io/devcontainers/features/git:1": {}
  },

  "customizations": {
    "vscode": {
      "extensions": [
        "quarto.quarto",
        "REditorSupport.r",
        "ms-vscode.live-server"
      ],
      "settings": {
        "editor.fontFamily": "'Anonymous Pro', 'Fira Code', Consolas, monospace",
        "editor.tabSize": 2,
        "files.trimTrailingWhitespace": true,
        "files.associations": {
          "*.qmd": "quarto"
        },
        "r.rterm.linux": "/usr/local/bin/R",
        "quarto.render.previewType": "internal"
      }
    }
  },

  "postCreateCommand": "bash -c 'sudo apt-get update && sudo apt-get install -y libcurl4-openssl-dev libssl-dev libxml2-dev && R -e \"install.packages(c('knitr', 'rmarkdown'), repos='https://cloud.r-project.org')\"'",

  "postStartCommand": "echo 'âœ… Dev container ready! Run: make preview'",

  "forwardPorts": [4200],
  "portsAttributes": {
    "4200": {
      "label": "Quarto Preview",
      "onAutoForward": "notify"
    }
  },

  "remoteUser": "vscode"
}
